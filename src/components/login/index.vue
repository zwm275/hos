<template>
  <div class="container">
    <el-dialog
      v-model="userStore.dialogTableVisible"
      title="用户登录"
      @close="close"
    >
      <div class="content">
        <div v-show="scene" class="left">
          <el-form :rules="rules" ref="ruleFormRef" :model="formInfo"
            ><el-form-item prop="account">
              <el-input
                placeholder="请输入手机号"
                :prefix-icon="User"
                v-model="formInfo.account"
              /> </el-form-item
            ><el-form-item prop="code">
              <el-input
                placeholder="请输入验证码"
                :prefix-icon="Lock"
                v-model="formInfo.code"
              /> </el-form-item
            ><el-form-item>
              <el-button @click="getUserCode" :disabled="codeDisabled">
                获取验证码&nbsp;
                <span v-show="timeout !== 5"> ( {{ timeout }} )</span>
              </el-button></el-form-item
            ><el-button
              :disabled="!(correctAccount == true && correctCode == true)"
              type="primary"
              style="width: 100%"
              @click="logIn()"
              >用户登录</el-button
            >
            <div
              @click="wxLogin"
              style="text-align: center; margin: 10px; cursor: pointer"
            >
              微信扫码登陆
            </div>
            <div style="text-align: center">
              <svg
                t="1689995073165"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2746"
                width="32"
                height="32"
              >
                <path
                  d="M328.3968 693.0432c1.9456-11.264-0.6144-20.3776-6.9632-24.064l-86.6304-50.2784c6.2464 3.6864 8.8064 12.8 6.9632 24.064l-6.2464 36.352c-0.4096 2.6624 0.2048 4.4032 1.536 5.2224l86.6304 50.2784c-1.3312-0.7168-1.9456-2.56-1.536-5.2224l6.2464-36.352z"
                  fill="#3E7702"
                  p-id="2747"
                ></path>
                <path
                  d="M323.7888 737.5872c-0.512 0-1.024-0.1024-1.536-0.4096l-86.6304-50.2784c-2.56-1.4336-3.6864-4.608-2.9696-8.3968l6.2464-36.352c1.7408-9.9328-0.4096-17.92-5.4272-20.8896-1.4336-0.8192-1.9456-2.7648-1.1264-4.1984 0.8192-1.4336 2.7648-1.9456 4.1984-1.1264l86.6304 50.2784c7.4752 4.3008 10.5472 14.4384 8.3968 27.2384l-6.2464 36.352c-0.2048 1.2288 0 1.8432 0.1024 2.048 1.4336 0.8192 1.9456 2.7648 1.024 4.1984-0.6144 1.024-1.6384 1.536-2.6624 1.536z m-79.1552-109.6704c1.1264 4.4032 1.2288 9.6256 0.2048 15.36l-6.2464 36.352c-0.2048 1.3312 0 1.9456 0.1024 2.048l80.4864 46.7968 6.144-35.84c1.7408-9.9328-0.4096-17.92-5.4272-20.8896l-75.264-43.8272z"
                  fill="#1B3302"
                  p-id="2748"
                ></path>
                <path
                  d="M448.9216 284.4672c103.1168-59.4944 186.88-27.3408 187.1872 71.8848 0.3072 99.2256-83.0464 227.9424-186.1632 287.4368-20.48 11.776-40.1408 19.968-58.5728 24.7808-2.3552 0.6144-4.7104 1.6384-7.0656 2.9696-4.4032 2.56-8.704 6.2464-12.5952 10.9568l-41.0624 49.2544c-0.9216 1.024-1.8432 1.8432-2.7648 2.3552-3.4816 1.9456-6.4512 0.1024-5.632-4.8128l6.2464-36.352c2.1504-12.3904-1.2288-22.2208-8.9088-24.9856-34.9184-12.4928-56.6272-45.6704-56.832-96.1536-0.3072-99.0208 83.0464-227.7376 186.1632-287.3344z"
                  fill="#72DD00"
                  p-id="2749"
                ></path>
                <path
                  d="M325.3248 737.9968c-1.8432 0-3.4816-0.7168-4.608-2.1504-1.024-1.2288-2.048-3.3792-1.4336-7.0656l6.2464-36.352c1.8432-10.9568-0.8192-19.3536-6.9632-21.504-18.432-6.656-32.8704-18.432-43.008-35.1232-10.4448-17.1008-15.7696-38.6048-15.7696-63.8976-0.1024-48.5376 19.3536-105.472 54.784-160.3584 35.4304-54.6816 82.6368-100.864 132.9152-129.8432 34.304-19.8656 67.9936-30.3104 97.4848-30.3104 28.0576 0 51.712 9.4208 68.1984 27.3408 16.9984 18.3296 26.0096 45.1584 26.112 77.5168 0.1024 48.5376-19.3536 105.472-54.784 160.3584C548.864 571.392 501.76 617.5744 451.4816 646.5536c-20.1728 11.6736-40.1408 20.0704-59.392 25.088-2.048 0.512-4.1984 1.4336-6.3488 2.6624-4.096 2.3552-8.192 5.9392-11.776 10.24l-41.0624 49.2544c-1.1264 1.3312-2.2528 2.3552-3.584 3.072-1.3312 0.7168-2.6624 1.1264-3.9936 1.1264z m219.5456-480.256c-28.3648 0-61.0304 10.24-94.4128 29.4912-102.0928 58.88-184.9344 186.6752-184.7296 284.7744 0.1024 47.5136 19.5584 80.5888 54.784 93.2864 9.1136 3.2768 13.312 14.1312 10.8544 28.3648l-6.2464 36.352c-0.2048 1.1264 0 1.7408 0.1024 1.9456 0.1024 0 0.4096 0 1.024-0.4096s1.3312-0.9216 1.9456-1.7408l41.0624-49.2544c4.096-4.9152 8.704-8.9088 13.4144-11.6736 2.6624-1.536 5.2224-2.6624 7.8848-3.2768 18.6368-4.8128 38.0928-13.0048 57.856-24.4736 102.0928-58.9824 184.9344-186.6752 184.6272-284.7744-0.1024-30.8224-8.4992-56.2176-24.4736-73.4208-15.36-16.4864-37.376-25.1904-63.6928-25.1904z"
                  fill="#1B3302"
                  p-id="2750"
                ></path>
                <path
                  d="M410.7264 396.0832c-4.3008-2.4576-10.1376-2.1504-16.6912 1.6384-12.9024 7.4752-23.3472 25.6-23.3472 40.448 0 7.3728 2.6624 12.5952 6.8608 15.0528l14.4384 8.3968c-4.1984-2.4576-6.8608-7.68-6.8608-15.0528 0-14.848 10.4448-32.9728 23.3472-40.448 6.5536-3.7888 12.3904-4.096 16.6912-1.6384l-14.4384-8.3968z"
                  fill="#3E7702"
                  p-id="2751"
                ></path>
                <path
                  d="M408.4736 406.1184c12.9024-7.4752 23.4496-1.4336 23.552 13.4144 0 14.848-10.4448 32.9728-23.3472 40.448-12.9024 7.4752-23.4496 1.4336-23.552-13.4144 0-14.848 10.4448-32.9728 23.3472-40.448z"
                  fill="#4F9901"
                  p-id="2752"
                ></path>
                <path
                  d="M535.4496 324.096c-4.3008-2.4576-10.1376-2.1504-16.6912 1.6384-12.9024 7.4752-23.3472 25.6-23.3472 40.448 0 7.3728 2.6624 12.5952 6.8608 15.0528l14.4384 8.3968c-4.1984-2.4576-6.8608-7.68-6.8608-15.0528 0-14.848 10.4448-32.9728 23.3472-40.448 6.5536-3.7888 12.3904-4.096 16.6912-1.6384l-14.4384-8.3968z"
                  fill="#3E7702"
                  p-id="2753"
                ></path>
                <path
                  d="M533.1968 334.1312c12.9024-7.4752 23.4496-1.4336 23.552 13.4144 0 14.848-10.4448 32.9728-23.3472 40.448-12.9024 7.4752-23.4496 1.4336-23.552-13.4144 0-14.9504 10.4448-32.9728 23.3472-40.448z"
                  fill="#4F9901"
                  p-id="2754"
                ></path>
                <path
                  d="M391.9872 464.6912c-0.512 0-1.024-0.1024-1.536-0.4096l-14.4384-8.3968c-5.3248-3.072-8.2944-9.4208-8.3968-17.7152 0-16.0768 10.8544-35.0208 24.8832-43.1104 4.1984-2.3552 8.192-3.584 12.0832-3.584 2.8672 0 5.4272 0.7168 7.68 1.9456l14.4384 8.3968c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264-3.3792-1.9456-8.3968-1.3312-13.6192 1.6384-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 5.9392 1.8432 10.24 5.12 12.288 1.024 0.512 1.7408 1.536 1.7408 2.7648 0 1.6384-1.3312 3.072-3.072 3.072z m12.5952-67.072c-2.6624 0-5.8368 0.9216-9.0112 2.7648-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 6.0416 1.9456 10.4448 5.3248 12.3904l3.584 2.048c-0.4096-1.8432-0.6144-3.8912-0.6144-6.0416 0-16.0768 10.8544-35.0208 24.8832-43.1104 1.9456-1.1264 3.8912-2.048 5.8368-2.6624l-3.584-2.048c-1.3312-0.7168-2.8672-1.1264-4.608-1.1264z"
                  fill="#1B3302"
                  p-id="2755"
                ></path>
                <path
                  d="M398.1312 466.2272c-9.728 0-16.0768-7.68-16.0768-19.6608 0-16.0768 10.8544-35.0208 24.8832-43.1104 4.1984-2.3552 8.192-3.584 12.0832-3.584 9.728 0 16.0768 7.68 16.0768 19.6608 0 16.0768-10.8544 35.0208-24.8832 43.1104-4.1984 2.3552-8.2944 3.584-12.0832 3.584z m20.8896-60.2112c-2.6624 0-5.8368 0.9216-9.0112 2.7648-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 8.4992 3.6864 13.5168 9.9328 13.5168 2.6624 0 5.8368-0.9216 9.0112-2.7648 12.0832-6.9632 21.8112-23.9616 21.8112-37.7856-0.1024-8.4992-3.7888-13.5168-9.9328-13.5168zM516.7104 392.6016c-0.512 0-1.024-0.1024-1.536-0.4096l-14.4384-8.3968c-5.3248-3.072-8.2944-9.4208-8.3968-17.7152 0-16.0768 10.8544-35.0208 24.8832-43.1104 4.1984-2.3552 8.192-3.584 12.0832-3.584 2.8672 0 5.4272 0.7168 7.68 2.048l14.4384 8.3968c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264-3.3792-1.9456-8.3968-1.3312-13.6192 1.6384-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 5.9392 1.8432 10.24 5.12 12.288 1.024 0.512 1.7408 1.536 1.7408 2.7648 0 1.6384-1.3312 2.9696-3.072 2.9696 0.1024 0 0 0 0 0z m12.5952-67.072c-2.6624 0-5.8368 0.9216-9.0112 2.7648-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 6.0416 1.9456 10.4448 5.3248 12.3904l3.584 2.048c-0.4096-1.8432-0.6144-3.8912-0.6144-6.0416 0-16.0768 10.8544-35.0208 24.8832-43.1104 1.9456-1.1264 3.8912-2.048 5.8368-2.6624l-3.584-2.048c-1.3312-0.7168-2.8672-1.1264-4.608-1.1264z"
                  fill="#1B3302"
                  p-id="2756"
                ></path>
                <path
                  d="M522.8544 394.24c-9.728 0-16.0768-7.68-16.0768-19.6608 0-16.0768 10.8544-35.0208 24.8832-43.1104 4.1984-2.3552 8.192-3.584 12.0832-3.584 9.728 0 16.0768 7.68 16.0768 19.6608 0 16.0768-10.8544 35.0208-24.8832 43.1104-4.1984 2.3552-8.192 3.584-12.0832 3.584z m20.8896-60.3136c-2.6624 0-5.8368 0.9216-9.0112 2.7648-12.0832 6.9632-21.8112 23.9616-21.8112 37.7856 0 8.4992 3.6864 13.5168 9.9328 13.5168 2.6624 0 5.8368-0.9216 9.0112-2.7648 12.0832-6.9632 21.8112-23.9616 21.8112-37.7856 0-8.3968-3.6864-13.5168-9.9328-13.5168z"
                  fill="#1B3302"
                  p-id="2757"
                ></path>
                <path
                  d="M693.8624 476.9792C780.3904 427.008 850.7392 453.7344 850.944 536.576c0.1024 44.544-19.968 96.1536-52.0192 142.1312-4.7104 6.7584-6.9632 14.848-5.8368 20.8896l4.096 22.016c0.8192 4.3008-2.4576 10.0352-6.144 12.1856-0.9216 0.512-1.9456 0.8192-2.8672 0.8192l-31.5392-0.2048c-2.1504 0-4.5056 0.7168-6.9632 2.1504-1.536 0.8192-2.9696 1.9456-4.5056 3.2768-15.872 14.336-32.8704 27.0336-50.4832 37.1712-86.528 49.9712-156.8768 23.2448-157.0816-59.5968s69.7344-190.464 156.2624-240.4352z"
                  fill="#FFFFFF"
                  p-id="2758"
                ></path>
                <path
                  d="M728.2688 411.4432c-28.8768-16.7936-72.3968-12.9024-121.0368 15.1552-86.528 49.9712-156.4672 157.5936-156.2624 240.5376 0.1024 36.2496 13.6192 61.7472 36.0448 74.8544l86.6304 50.2784c-22.4256-13.0048-35.9424-38.5024-36.0448-74.8544-0.2048-82.8416 69.7344-190.5664 156.2624-240.5376 48.64-28.0576 92.16-31.9488 121.0368-15.1552l-86.6304-50.2784z"
                  fill="#BABABA"
                  p-id="2759"
                ></path>
                <path
                  d="M613.9904 805.376c-23.6544 0-43.52-7.8848-57.4464-22.9376-14.2336-15.36-21.8112-37.7856-21.9136-64.9216-0.1024-40.6528 16.2816-88.3712 46.08-134.2464s69.4272-84.48 111.7184-108.9536c28.9792-16.6912 57.4464-25.6 82.3296-25.6 23.6544 0 43.52 7.8848 57.4464 22.9376 14.2336 15.36 21.8112 37.7856 21.9136 64.9216 0.1024 43.3152-19.0464 95.744-52.6336 143.9744-4.1984 6.144-6.3488 13.4144-5.4272 18.5344l4.096 22.016c1.1264 5.8368-3.1744 12.8-7.68 15.4624-1.4336 0.8192-2.9696 1.2288-4.4032 1.2288l-31.5392-0.2048c-1.6384 0-3.4816 0.6144-5.4272 1.7408-1.3312 0.7168-2.6624 1.7408-3.9936 2.9696-16.384 14.848-33.5872 27.5456-50.9952 37.5808-28.7744 16.5888-57.2416 25.4976-82.1248 25.4976z m160.6656-350.5152c-23.7568 0-51.2 8.6016-79.2576 24.7808-85.504 49.3568-154.9312 156.0576-154.7264 237.8752 0.1024 51.2 27.5456 81.7152 73.216 81.7152 23.7568 0 51.2-8.6016 79.2576-24.7808 17.1008-9.8304 33.8944-22.2208 49.9712-36.864 1.6384-1.4336 3.2768-2.7648 5.0176-3.6864 2.8672-1.6384 5.7344-2.56 8.3968-2.56l31.6416 0.2048c0.3072 0 0.8192-0.2048 1.3312-0.4096 2.7648-1.6384 5.2224-6.2464 4.7104-8.9088l-4.096-22.016c-1.3312-6.8608 1.1264-15.6672 6.3488-23.2448 32.8704-47.2064 51.6096-98.304 51.5072-140.3904-0.2048-51.2-27.5456-81.7152-73.3184-81.7152z"
                  fill="#343434"
                  p-id="2760"
                ></path>
                <path
                  d="M573.7472 795.3408c-0.512 0-1.024-0.1024-1.536-0.4096l-86.6304-50.3808c-24.1664-14.0288-37.4784-41.5744-37.5808-77.5168-0.1024-40.6528 16.2816-88.3712 46.08-134.2464s69.4272-84.48 111.7184-108.9536c28.9792-16.6912 57.4464-25.6 82.3296-25.6 15.872 0 29.9008 3.4816 41.7792 10.4448l86.6304 50.2784c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264h-0.1024c-10.9568-6.3488-23.8592-9.5232-38.6048-9.5232-23.7568 0-51.2 8.6016-79.2576 24.7808-85.504 49.3568-154.9312 156.0576-154.7264 237.8752 0.1024 33.5872 12.288 59.1872 34.304 72.0896 1.024 0.512 1.7408 1.536 1.7408 2.7648 0 1.7408-1.3312 3.072-3.072 3.072zM688.128 404.48c-23.7568 0-51.2 8.6016-79.2576 24.7808-85.6064 49.3568-154.9312 156.0576-154.7264 237.8752 0.1024 33.6896 12.3904 59.2896 34.5088 72.192l62.2592 36.1472c-10.5472-14.848-16.2816-34.6112-16.2816-57.9584-0.1024-40.6528 16.2816-88.3712 46.08-134.2464s69.4272-84.48 111.7184-108.9536c28.9792-16.6912 57.4464-25.6 82.3296-25.6 4.5056 0 8.9088 0.3072 13.1072 0.8192l-61.0304-35.4304c-10.9568-6.3488-23.9616-9.6256-38.7072-9.6256z"
                  fill="#343434"
                  p-id="2761"
                ></path>
                <path
                  d="M668.4672 582.3488c-3.7888-2.1504-9.0112-1.8432-14.7456 1.4336-11.4688 6.656-20.6848 22.6304-20.6848 35.84 0 6.5536 2.3552 11.1616 6.0416 13.312l14.4384 8.3968c-3.6864-2.1504-6.0416-6.7584-6.0416-13.312 0-13.2096 9.216-29.184 20.6848-35.84 5.7344-3.2768 10.9568-3.6864 14.7456-1.4336l-14.4384-8.3968z"
                  fill="#777777"
                  p-id="2762"
                ></path>
                <path
                  d="M668.0576 592.1792c11.4688-6.656 20.7872-1.3312 20.7872 11.8784s-9.216 29.184-20.6848 35.84-20.7872 1.3312-20.7872-11.8784 9.3184-29.184 20.6848-35.84z"
                  fill="#BABABA"
                  p-id="2763"
                ></path>
                <path
                  d="M773.632 521.6256c-3.7888-2.1504-9.0112-1.8432-14.7456 1.4336-11.4688 6.656-20.6848 22.6304-20.6848 35.84 0 6.5536 2.3552 11.1616 6.0416 13.312l14.4384 8.3968c-3.6864-2.1504-6.0416-6.7584-6.0416-13.312 0-13.2096 9.216-29.184 20.6848-35.84 5.7344-3.2768 10.9568-3.6864 14.7456-1.4336l-14.4384-8.3968z"
                  fill="#777777"
                  p-id="2764"
                ></path>
                <path
                  d="M773.3248 531.456c11.4688-6.656 20.7872-1.3312 20.7872 11.8784s-9.216 29.184-20.6848 35.84S752.64 580.5056 752.64 567.296s9.216-29.2864 20.6848-35.84z"
                  fill="#BABABA"
                  p-id="2765"
                ></path>
                <path
                  d="M653.5168 644.4032c-0.512 0-1.024-0.1024-1.536-0.4096l-14.4384-8.3968c-4.9152-2.8672-7.5776-8.4992-7.5776-15.9744 0-14.336 9.728-31.232 22.2208-38.5024 3.7888-2.1504 7.3728-3.2768 10.8544-3.2768 2.56 0 4.9152 0.6144 6.9632 1.8432l14.4384 8.3968c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264-2.8672-1.6384-7.168-1.1264-11.6736 1.4336-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 5.12 1.536 8.8064 4.3008 10.5472 1.024 0.512 1.7408 1.536 1.7408 2.7648 0 1.6384-1.3312 2.9696-3.072 3.072z m9.4208-60.416c-2.3552 0-5.0176 0.8192-7.7824 2.4576-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 5.2224 1.6384 9.0112 4.5056 10.6496l4.1984 2.4576c-0.3072-1.4336-0.4096-3.072-0.4096-4.7104 0-14.336 9.728-31.232 22.2208-38.5024 1.536-0.9216 2.9696-1.536 4.5056-2.048l-4.1984-2.4576c-1.024-0.7168-2.3552-1.024-3.8912-1.024z"
                  fill="#343434"
                  p-id="2766"
                ></path>
                <path
                  d="M658.944 645.7344c-8.8064 0-14.5408-6.9632-14.5408-17.7152 0-14.336 9.728-31.232 22.2208-38.5024 3.7888-2.1504 7.3728-3.2768 10.8544-3.2768 8.8064 0 14.5408 6.9632 14.5408 17.8176 0 14.336-9.728 31.232-22.2208 38.5024-3.7888 2.1504-7.3728 3.1744-10.8544 3.1744z m18.432-53.3504c-2.3552 0-5.0176 0.8192-7.7824 2.4576-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 7.2704 3.1744 11.6736 8.3968 11.6736 2.3552 0 5.0176-0.8192 7.7824-2.4576 10.5472-6.144 19.1488-20.992 19.1488-33.1776 0.1024-7.2704-3.072-11.6736-8.3968-11.6736zM758.6816 583.5776c-0.512 0-1.024-0.1024-1.536-0.4096l-14.4384-8.3968c-4.9152-2.8672-7.5776-8.4992-7.5776-15.9744 0-14.336 9.728-31.232 22.2208-38.5024 3.7888-2.1504 7.3728-3.2768 10.8544-3.2768 2.56 0 4.9152 0.6144 6.9632 1.8432l14.4384 8.3968c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264-2.8672-1.6384-7.168-1.1264-11.6736 1.4336-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 5.12 1.536 8.8064 4.3008 10.5472 1.024 0.512 1.7408 1.536 1.7408 2.7648 0 1.7408-1.3312 3.072-3.072 3.072 0.1024 0 0 0 0 0z m9.5232-60.3136c-2.3552 0-5.0176 0.8192-7.7824 2.4576-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 5.2224 1.6384 9.0112 4.5056 10.6496l4.1984 2.4576c-0.3072-1.4336-0.4096-3.072-0.4096-4.7104 0-14.336 9.728-31.232 22.2208-38.5024 1.536-0.9216 2.9696-1.536 4.5056-2.048L772.096 524.288c-1.1264-0.7168-2.4576-1.024-3.8912-1.024z"
                  fill="#343434"
                  p-id="2767"
                ></path>
                <path
                  d="M764.1088 585.0112c-8.8064 0-14.5408-6.9632-14.5408-17.8176 0-14.336 9.728-31.232 22.2208-38.5024 3.7888-2.1504 7.3728-3.2768 10.8544-3.2768 8.8064 0 14.5408 6.9632 14.5408 17.8176 0 14.336-9.728 31.232-22.2208 38.5024-3.6864 2.1504-7.3728 3.2768-10.8544 3.2768z m18.5344-53.3504c-2.3552 0-5.0176 0.8192-7.7824 2.4576-10.5472 6.144-19.1488 20.992-19.1488 33.1776 0 7.2704 3.1744 11.6736 8.3968 11.6736 2.3552 0 5.0176-0.8192 7.7824-2.4576 10.5472-6.144 19.1488-20.992 19.1488-33.1776 0-7.3728-3.1744-11.6736-8.3968-11.6736z"
                  fill="#343434"
                  p-id="2768"
                ></path>
                <path
                  d="M506.1632 216.1664c-34.4064-19.968-86.1184-15.4624-143.9744 17.92-103.0144 59.5968-186.368 188.3136-186.0608 287.5392 0.1024 43.6224 16.384 74.24 43.2128 89.8048l86.6304 50.2784c-26.9312-15.6672-43.1104-46.2848-43.2128-89.8048-0.3072-99.2256 83.0464-227.9424 186.1632-287.5392 57.856-33.3824 109.568-37.888 143.9744-17.92l-86.7328-50.2784z"
                  fill="#4F9901"
                  p-id="2769"
                ></path>
                <path
                  d="M305.9712 664.8832c-0.512 0-1.024-0.1024-1.536-0.4096l-86.6304-50.3808c-28.7744-16.6912-44.6464-49.5616-44.7488-92.4672-0.1024-48.5376 19.3536-105.472 54.784-160.3584 35.4304-54.6816 82.6368-100.864 132.9152-129.8432 34.304-19.8656 67.9936-30.3104 97.4848-30.3104 18.7392 0 35.4304 4.1984 49.5616 12.3904l86.6304 50.2784c1.4336 0.8192 1.9456 2.7648 1.1264 4.1984-0.8192 1.4336-2.7648 1.9456-4.1984 1.1264-13.1072-7.68-28.7744-11.4688-46.3872-11.4688-28.3648 0-61.0304 10.1376-94.4128 29.4912-102.1952 58.9824-185.0368 186.7776-184.832 284.8768 0.1024 40.5504 14.848 71.4752 41.472 87.04 1.024 0.512 1.7408 1.536 1.7408 2.7648 0.1024 1.6384-1.2288 3.072-2.9696 3.072z m152.2688-457.5232c-28.3648 0-61.0304 10.1376-94.4128 29.4912-102.0928 58.88-184.9344 186.6752-184.6272 284.7744 0.1024 40.6528 14.9504 71.5776 41.6768 87.1424l60.0064 34.816c-13.7216-17.92-21.0944-42.496-21.1968-71.68-0.1024-48.5376 19.3536-105.472 54.784-160.3584 35.4304-54.6816 82.6368-100.864 132.9152-129.8432 34.304-19.8656 67.9936-30.3104 97.4848-30.3104 6.4512 0 12.6976 0.512 18.5344 1.4336l-58.7776-34.0992c-13.1072-7.4752-28.672-11.3664-46.3872-11.3664z"
                  fill="#1B3302"
                  p-id="2770"
                ></path>
              </svg>
            </div>
          </el-form>
        </div>
        <div v-show="!scene" class="weixin">
          <div style="cursor: pointer" @click="scene = !scene">&lt;返回</div>
          <!-- 在这个容器里显示微信扫码登录页面 -->
          <div id="login_container"></div>
        </div>
        <div class="right">
          <div class="code">
            <div>
              <img src="../../assets/images/code_app.png" alt="" />
              <p>
                <svg
                  t="1689996067972"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="3425"
                  width="16"
                  height="16"
                >
                  <path
                    d="M767.818667 409.173333C867.338667 444.266667 938.666667 539.136 938.666667 650.666667c0 42.709333-10.496 83.978667-30.261334 120.842666-1.792 3.338667-4.992 8.928-9.696 16.96l14.613334 53.557334c6.506667 23.893333-15.402667 45.813333-39.296 39.296l-53.642667-14.634667-6.229333 3.669333A254.933333 254.933333 0 0 1 682.666667 906.666667c-77.994667 0-147.84-34.88-194.805334-89.888a352.608 352.608 0 0 1-56.64 4.554666c-63.338667 0-124.266667-16.853333-177.472-48.298666-1.834667-1.088-6.410667-3.733333-13.632-7.893334l-80.544 21.653334c-23.914667 6.432-45.76-15.573333-39.146666-39.434667l21.792-78.752a961.205333 961.205333 0 0 1-15.904-27.317333A336.384 336.384 0 0 1 85.333333 480c0-188.618667 154.965333-341.333333 345.888-341.333333 159.914667 0 297.984 108.010667 335.818667 259.296 0.949333 3.765333 1.173333 7.552 0.778667 11.2z m-68.106667-13.952C662.88 282.037333 555.178667 202.666667 431.221333 202.666667 275.434667 202.666667 149.333333 326.933333 149.333333 480c0 46.272 11.498667 90.837333 33.194667 130.698667 2.88 5.290667 10.176 17.706667 21.621333 36.746666a32 32 0 0 1 3.413334 25.013334l-10.517334 37.994666 39.232-10.549333a32 32 0 0 1 24.234667 3.146667c14.272 8.192 22.773333 13.098667 25.802667 14.890666A283.882667 283.882667 0 0 0 431.221333 757.333333c6.154667 0 12.288-0.192 18.389334-0.576A255.061333 255.061333 0 0 1 426.666667 650.666667c0-141.386667 114.613333-256 256-256 5.728 0 11.413333 0.192 17.045333 0.554666z m133.706667 397.056a32 32 0 0 1 3.338666-24.725333 996.672 996.672 0 0 0 15.242667-26.293333A190.997333 190.997333 0 0 0 874.666667 650.666667c0-106.037333-85.962667-192-192-192s-192 85.962667-192 192 85.962667 192 192 192a190.933333 190.933333 0 0 0 98.570666-27.2c2.208-1.322667 8.288-4.874667 18.517334-10.837334a32 32 0 0 1 24.522666-3.210666l12.565334 3.424-3.424-12.565334zM330.666667 426.666667a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m192 0a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m85.333333 202.666666a32 32 0 1 1 0-64 32 32 0 0 1 0 64z m149.333333 0a32 32 0 1 1 0-64 32 32 0 0 1 0 64z"
                    fill="#000000"
                    p-id="3426"
                  ></path>
                </svg>
              </p>
              <p>微信扫一扫关注</p>
              <p>“快速预约挂号”</p>
            </div>
            <div>
              <img src="../../assets/images/code_app.png" alt="" />
              <p>
                <svg
                  t="1689996002335"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="2336"
                  width="16"
                  height="16"
                >
                  <path
                    d="M820.409449 797.228346q0 25.19685-10.07874 46.866142t-27.716535 38.299213-41.322835 26.204724-50.897638 9.574803l-357.795276 0q-27.212598 0-50.897638-9.574803t-41.322835-26.204724-27.716535-38.299213-10.07874-46.866142l0-675.275591q0-25.19685 10.07874-47.370079t27.716535-38.80315 41.322835-26.204724 50.897638-9.574803l357.795276 0q27.212598 0 50.897638 9.574803t41.322835 26.204724 27.716535 38.80315 10.07874 47.370079l0 675.275591zM738.771654 170.330709l-455.559055 0 0 577.511811 455.559055 0 0-577.511811zM510.992126 776.062992q-21.165354 0-36.787402 15.11811t-15.622047 37.291339q0 21.165354 15.622047 36.787402t36.787402 15.622047q22.173228 0 37.291339-15.622047t15.11811-36.787402q0-22.173228-15.11811-37.291339t-37.291339-15.11811zM591.622047 84.661417q0-8.062992-5.03937-12.598425t-11.086614-4.535433l-128 0q-5.03937 0-10.582677 4.535433t-5.543307 12.598425 5.03937 12.598425 11.086614 4.535433l128 0q6.047244 0 11.086614-4.535433t5.03937-12.598425z"
                    p-id="2337"
                  ></path>
                </svg>
              </p>
              <p>扫一扫下载</p>
              <p>“预约挂号”App</p>
            </div>
          </div>
          <div class="center">
            <p>XXXXX 官方指定平台</p>
            <p>快速挂号 安全放心</p>
          </div>
          <div class="footer">
            <el-button @click="close">关闭窗口</el-button>
          </div>
        </div>
      </div>
    </el-dialog>
  </div>
</template>

<script lang="ts" setup>
import useUserStore from "@/store/user";
import { Lock, User } from "@element-plus/icons-vue";
import { reactive, ref } from "vue";
import { reqUserCode, reqUserLogin, reqWxLogin } from "@/api/user";
import { ElMessage } from "element-plus";
const ruleFormRef = ref<any>();
// 仓库
const userStore = useUserStore();
// 控制手机号/微信登录
let scene = ref(true);
// 控制验证码
let codeDisabled = ref(true);
// 控制能否登录
let correctAccount = ref(false);
let correctCode = ref(false);
// 倒计时
let timeout = ref(5);

// 表单数据
let formInfo = reactive({
  account: "",
  code: "",
});
// 获取验证码
const getUserCode = async () => {
  // 倒计时
  codeDisabled.value = true;
  timeout.value -= 1;
  const timer = setInterval(() => {
    timeout.value -= 1;
    if (timeout.value <= -1) {
      clearInterval(timer);
      codeDisabled.value = false;
      timeout.value = 5;
    }
  }, 1000);
  let result = await reqUserCode(formInfo.account);
  formInfo.code = result.data;
};
//表单验证规则
const checkAccount = (_rule: any, value: any, callback: any) => {
  if (!value) {
    correctAccount.value = false;

    return callback(new Error("请输入手机号"));
  } else if (value.length !== 11) {
    callback(new Error("手机号长度应为11"));
    codeDisabled.value = true;
    correctAccount.value = false;
  } else {
    codeDisabled.value = false;
    correctAccount.value = true;
    callback();
  }
};
const checkCode = (_rule: any, value: any, callback: any) => {
  if (!value) {
    correctCode.value = false;

    return callback(new Error("请输入验证码"));
  } else if (value.length !== 6) {
    callback(new Error("验证码长度应为6"));
    correctCode.value = false;
  } else {
    correctCode.value = true;
    callback();
  }
};
const rules = reactive({
  account: [
    {
      validator: checkAccount,
      trigger: "change",
    },
  ],
  code: [{ validator: checkCode, trigger: "change" }],
});
//登录
const logIn = async () => {
  let reqInfo = { phone: formInfo.account, code: formInfo.code };
  let result = await reqUserLogin(reqInfo);
  if (result.code == 200) {
    userStore.userInfo.name = result.data.name;
    userStore.userInfo.token = result.data.token;
    userStore.dialogTableVisible = false;
    // 本地存储
    localStorage.setItem("userInfo", JSON.stringify(userStore.userInfo));
  } else {
    ElMessage({ type: "error", message: "登录失败" });
  }
};
// 对话框关闭的回调
const close = () => {
  userStore.dialogTableVisible = false;
  Object.assign(formInfo, {
    account: "",
    code: "",
  });
  ruleFormRef.value.resetFields();
};
// 微信登录
const wxLogin = async () => {
  scene.value = !scene.value;
  // 登陆后重定向页面
  let redirect_uri = encodeURIComponent(window.location.origin + "/wxlogin");
  // 获取微信登陆参数
  let result = await reqWxLogin(redirect_uri);
  // @ts-ignore
  new WxLogin({
    self_redirect: true,
    id: "login_container", //显示二维码容器设置
    appid: result.data.appid,
    scope: "snsapi_login",
    redirect_uri: result.data.redirectUri,
    state: result.data.state,
    style: "black",
    href: "",
  });
};
</script>

<style lang="scss" scoped>
.container {
  :deep(.el-dialog__body) {
    border-top: 1px solid rgba(#ccc, 0.5);
  }
  .content {
    display: flex;
    .left {
      flex: 1;
      padding: 20px;
      border: 1px solid rgba(#ccc, 0.5);

      // :deep(.el-form-item__content .el-button) {
      //   color: #a8b4d0;
      // }
    }
    .weixin {
      flex: 1;
      padding: 20px;
      border: 1px solid rgba(#ccc, 0.5);
    }
    .right {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      flex-direction: column;
      .code {
        display: flex;
        justify-content: space-around;
        img {
          width: 120px;
        }
        p {
          text-align: center;
          line-height: 20px;
        }
      }
      .center {
        padding: 50px;
        P {
          text-align: center;
          line-height: 50px;
          font-size: 20px;
          font-style: italic;
        }
      }
      .footer {
        display: flex;
        flex-direction: row-reverse;
      }
    }
  }
}
</style>
